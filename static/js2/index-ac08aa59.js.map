{"version":3,"mappings":"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","names":["relList","link","processPreload","mutations","mutation","node","getFetchOpts","script","fetchOpts","useAppStore","defineStore","collapse","settings","defaultSettings","useSettingsStore","data","useRoute","service","axios","doService","promise","err","config","error","response","ElMessage","login","request","getLocStr","key","storage","cookie","removeLocStr","setLocStr","value","setToken","token","tokenName","getToken","removeToken","useUserStore","userInfo","username","password","res","defaultUrl","appStore","userStore","route","router","useRouter","avatarUrl","computed","breadcrumb","toggleSideBar","handleCommand","command","hasPermission","roles","_roles","role","routes","tmp","filterAsyncRoutes","useRouteStore","resolve","accessedRoutes","asyncRoutes","constantRoutes","title","logo","isExternal","path","validUsername","str","subMenu","index","component","menuProps","isNest","linkProps","to","onlyOneChild","ref","routeTitle","hasOneShowingChild","children","parent","showingChildren","item","resolvePath","routePath","basePath","routeStore","settingsStore","activeMenu","meta","sidebarLogo","useTagsStore","view","v","i","affixTags","tag","tagsStore","dynamicTags","tagsValue","onMounted","initTags","addTags","watch","filterAffixTags","tags","tagPath","tempTags","isActive","toLastView","visitedViews","latestView","refreshRoute","nextTick","fullPath","closeOtherRoutes","closeAllRoutes","handleClick","panel","handleClose","name","drawer","reactive","handleSubmit","showTagsView","fixedHeader","classObj","Layout","__vitePreload","createRouter","createWebHashHistory","addRoutes","NProgress","whiteList","_from","next","app","createApp","App","ElementPlusIconsVue","createPinia","ElementPlus"],"sources":["../../../vite/modulepreload-polyfill","../../../src/stores/app.ts","../../../src/config/settings.ts","../../../src/stores/settings.ts","../../../src/layout/components/AppMain.vue","../../../src/utils/request.ts","../../../src/api/user.ts","../../../src/utils/locStr.ts","../../../src/utils/auth.ts","../../../src/stores/user.ts","../../../src/assets/avatar.gif","../../../src/layout/components/Navbar.vue","../../../src/stores/routes.ts","../../../src/layout/components/Sidebar/Logo.vue","../../../src/utils/validate.ts","../../../src/layout/components/Sidebar/Item.vue","../../../src/layout/components/Sidebar/Link.vue","../../../src/layout/components/Sidebar/MenuItem.vue","../../../src/layout/components/Sidebar/index.vue","../../../src/stores/tagsView.ts","../../../src/layout/components/TagsView/index.vue","../../../src/layout/components/Settings/index.vue","../../../src/layout/index.vue","../../../src/router/index.ts","../../../src/config/permission.ts","../../../src/main.ts"],"sourcesContent":["__VITE_IS_MODERN__&&(function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n}());","import { defineStore } from 'pinia'\r\n\r\nexport const useAppStore = defineStore({\r\n  id: 'app',\r\n  state: () => ({\r\n    sidebar: {\r\n      collapse: false\r\n    }\r\n  }),\r\n  getters: {\r\n  },\r\n  actions: {\r\n    toggleSideBar(collapse:boolean) {\r\n      this.sidebar.collapse = collapse\r\n    }\r\n  }\r\n})\r\n","export interface ISettings {\r\n  //标题 （包括初次加载雪花屏的标题 页面的标题 浏览器的标题）\r\n\ttitle:string,\r\n\t//token名称\r\n  tokenName: string,\r\n  //token存储位置localStorage sessionStorage cookie\r\n  storage: string,\r\n  // 是否展示设置面板\r\n  showSettings: boolean,\r\n  // 是否展示页签\r\n  tagsView: boolean,\r\n  // 是否固定页面头部\r\n  fixedHeader: boolean,\r\n  //是否显示logo，不显示时设置false，显示时请填写svgIcon图标名称\r\n  sidebarLogo: boolean,\r\n}\r\n\r\n// You can customize below settings :)\r\nconst settings: ISettings = {\r\n  //标题 （包括初次加载雪花屏的标题 页面的标题 浏览器的标题）\r\n\ttitle: \"vue-ts-admin\",\r\n  //token名称\r\n  tokenName: \"token\",\r\n  //token存储位置localStorage sessionStorage cookie\r\n  storage: \"localStorage\",\r\n  showSettings: true,\r\n  tagsView: true,\r\n  fixedHeader: true,\r\n  sidebarLogo: true,\r\n}\r\n\r\nexport default settings","import { defineStore } from 'pinia'\r\n// import variables from '@/styles/element-variables.scss'\r\nimport defaultSettings from '@/config/settings'\r\nimport type { ISettings } from '@/config/settings'\r\n\r\ntype PickSettings = Pick<ISettings, \"showSettings\" | \"tagsView\" | \"fixedHeader\" | \"sidebarLogo\">\r\ntype PartialSettings = Partial<PickSettings>\r\n\r\nconst { showSettings, tagsView, fixedHeader, sidebarLogo } = defaultSettings\r\nexport const useSettingsStore = defineStore({\r\n  id: 'settings',\r\n  state: () => ({\r\n    // theme: variables.theme,\r\n    settings: {\r\n      showSettings: showSettings,\r\n      tagsView: tagsView,\r\n      fixedHeader: fixedHeader,\r\n      sidebarLogo: sidebarLogo\r\n    }\r\n  }),\r\n  getters: {\r\n  },\r\n  actions: {\r\n    changeSetting(data:PartialSettings) {\r\n      this.settings = Object.assign({}, this.settings, data)\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <div class=\"app-main\">\r\n    <router-view v-slot=\"{ Component, route }\">\r\n      <transition :name=\"routeTransition || 'fade'\" mode=\"out-in\">\r\n        <keep-alive>\r\n          <suspense>\r\n            <template #default>\r\n              <component\r\n                :is=\"Component\"\r\n                :key=\"route.meta.usePathKey ? route.path : route.name\"\r\n              />\r\n            </template>\r\n            <template #fallback> Loading... </template>\r\n          </suspense>\r\n        </keep-alive>\r\n      </transition>\r\n    </router-view>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\n  import { useRoute } from 'vue-router'\r\n  const route = useRoute()\r\n  const routeTransition = route.meta.transition as string\r\n</script>","import axios from 'axios';\r\nimport { ElMessage } from 'element-plus'\r\nimport NProgress from 'nprogress'\r\nimport 'nprogress/nprogress.css'\r\nimport type { AxiosError, AxiosInstance, AxiosResponse, AxiosRequestConfig } from 'axios'\r\nconst service:AxiosInstance = axios.create({\r\n    timeout: 5000\r\n});\r\n\r\nasync function doService(promise:Promise<any>) {\r\n    try {\r\n        const data = await promise;\r\n        NProgress.done();\r\n        return data;\r\n    } catch (err) {\r\n        NProgress.done();\r\n        return err;\r\n    }\r\n  }\r\n\r\nservice.interceptors.request.use(\r\n    (config: AxiosRequestConfig) => {\r\n        return config;\r\n    },\r\n    (error: AxiosError) => {\r\n        console.log(error);\r\n        return Promise.reject();\r\n    }\r\n);\r\n\r\nservice.interceptors.response.use(\r\n    (response: AxiosResponse) => {\r\n        if (response.status === 200) {\r\n            return response.data;\r\n        } else {\r\n            ElMessage.error('网络请求错误')\r\n            return Promise.reject();\r\n        }\r\n    },\r\n    (error: AxiosError) => {\r\n        ElMessage.error(error.message)\r\n        return Promise.reject();\r\n    }\r\n);\r\n\r\nconst request = async function (config:AxiosRequestConfig) {\r\n    NProgress.start()\r\n    return await doService(service(config))\r\n  }\r\n  // export default service\r\n  export default request","import request from '@/utils/request';\r\n\r\nexport const login = (data:Record<string, string>) => {\r\n    return request({\r\n        url: '/vue3-element-admin/mock/login.json',\r\n        method: 'get',\r\n        data\r\n    });\r\n};\r\n","import cookie from \"js-cookie\";\r\nimport settings from \"@/config/settings\";\r\n const { storage } = settings;\r\n /**\r\n  * @description 获取本地存储\r\n  * @param key\r\n  * @returns {string}\r\n  */\r\n  export const getLocStr = (key: string): string => {\r\n   if (storage) {\r\n     if (\"localStorage\" === storage) {\r\n       return localStorage.getItem(key) || '';\r\n     } else if (\"sessionStorage\" === storage) {\r\n       return sessionStorage.getItem(key) || '';\r\n     } else if (\"cookie\" === storage) {\r\n       return cookie.get(key) || '';\r\n     } else {\r\n       return localStorage.getItem(key) || '';\r\n     }\r\n   } else {\r\n     return localStorage.getItem(key) || '';\r\n   }\r\n }\r\n /**\r\n  * @description 清楚本地存储\r\n  * @returns {void}\r\n  */\r\n export const removeLocStr = (key: string): void => {\r\n   if (storage) {\r\n     if (\"localStorage\" === storage) {\r\n       return localStorage.removeItem(key);\r\n     } else if (\"sessionStorage\" === storage) {\r\n       return sessionStorage.clear();\r\n     } else if (\"cookie\" === storage) {\r\n       return cookie.remove(key);\r\n     } else {\r\n       return localStorage.removeItem(key);\r\n     }\r\n   } else {\r\n     return localStorage.removeItem(key);\r\n   }\r\n }\r\n /**\r\n  * @description 本地存储缓存\r\n  * @param key, value\r\n  * @returns {void}\r\n  */\r\n  export const setLocStr = (key: string, value: string): void => {\r\n   if (storage) {\r\n     if (\"localStorage\" === storage) {\r\n       return localStorage.setItem(key, value);\r\n     } else if (\"sessionStorage\" === storage) {\r\n       return sessionStorage.setItem(key, value);\r\n     } else if (\"cookie\" === storage) {\r\n       cookie.set(key, value);\r\n     } else {\r\n       return localStorage.setItem(key, value);\r\n     }\r\n   } else {\r\n     return localStorage.setItem(key, value);\r\n   }\r\n }\r\n ","import { setLocStr, getLocStr, removeLocStr } from './locStr'\r\nimport settings from \"@/config/settings\";\r\nconst { tokenName } = settings;\r\n/**\r\n  * @description 存储token\r\n  * @param token\r\n  * @returns {void|*}\r\n  */\r\n export const setToken = (token: string):void => {\r\n  setLocStr(tokenName, token)\r\n}\r\n/**\r\n* @description 获取token\r\n* @returns {string}\r\n*/\r\nexport const getToken = ():string => {\r\n return getLocStr(tokenName)\r\n}\r\n/**\r\n* @description 清除token\r\n* @returns {void}\r\n*/\r\nexport const removeToken = (): void => {\r\n  removeLocStr(tokenName)\r\n}\r\n/**\r\n* @description 获取侧边栏状态\r\n* @returns {string}\r\n*/\r\nconst sidebarStatusKey = 'sidebar_status'\r\nexport const getSidebarStatus = () => {\r\n return getLocStr(sidebarStatusKey);\r\n}\r\n/**\r\n* @description 缓存侧边栏状态\r\n* @returns {void}\r\n*/\r\nexport const setSidebarStatus = (sidebarStatus: string) => {\r\n  setLocStr(sidebarStatusKey, sidebarStatus)\r\n}\r\n/**\r\n* @description 获取size\r\n* @returns {string}\r\n*/\r\nconst sizeKey = 'size'\r\nexport const getSize = ():string => {\r\n return getLocStr(sizeKey);\r\n}\r\n/**\r\n* @description 保存size\r\n* @returns {void}\r\n*/\r\nexport const setSize = (size: string): void => {\r\n  setLocStr(sizeKey, size)\r\n}\r\n\r\n","import { defineStore } from 'pinia'\r\nimport { randomString } from '@/utils'\r\nimport { login } from '@/api/user'\r\nimport { setToken, getToken, removeToken } from '@/utils/auth'\r\nexport const useUserStore = defineStore({\r\n  id: 'user',\r\n  state: () => ({\r\n    token: getToken(),\r\n    avatar: '',\r\n    roles: []\r\n  }),\r\n  getters: {\r\n  },\r\n  actions: {\r\n    async getUserInfo() {\r\n      return true\r\n    },\r\n    async login(userInfo: {username: string, password: string}) {\r\n      const { username, password } = userInfo\r\n      if (username && password) {\r\n        const res = await login(userInfo)\r\n        if (res.token) {\r\n          this.token = res.token\r\n          setToken(res.token)\r\n          return true\r\n        }\r\n      }\r\n      return false\r\n    },\r\n    async logout() {\r\n      if (this.token === '') {\r\n        throw Error('Logout: token is undefined!')\r\n      }\r\n      this.token = ''\r\n      removeToken()\r\n      return true\r\n    },\r\n    resetToken() {\r\n      // this.avatar = avatar\r\n    }\r\n  }\r\n})\r\n","export default \"__VITE_ASSET__cf2b977d__\"","<template>\r\n  <el-header class=\"navbar\">\r\n    <div class=\"left\">\r\n      <el-icon class=\"collapse\" @click=\"toggleSideBar(!collapse)\">\r\n        <Expand v-if=\"collapse\" />\r\n        <Fold v-else />\r\n      </el-icon>\r\n      <el-breadcrumb :separator-icon=\"ArrowRight\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item v-for=\"item in breadcrumb\" :key=\"item.path\">{{item.meta?.title || ''}}</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    <div class=\"right\">\r\n      <el-dropdown class=\"avatar-container\" trigger=\"click\" @command=\"handleCommand\">\r\n        <el-avatar :size=\"40\" :src=\"avatarUrl\" />\r\n        <template #dropdown>\r\n          <el-dropdown-menu>\r\n            <router-link to=\"/\">\r\n              <el-dropdown-item>Dashboard</el-dropdown-item>\r\n            </router-link>\r\n            <el-dropdown-item divided command=\"logout\">退出登录</el-dropdown-item>\r\n          </el-dropdown-menu>\r\n        </template>\r\n      </el-dropdown>\r\n    </div>\r\n  </el-header>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { useAppStore } from '@/stores/app';\r\nimport { useUserStore } from '@/stores/user';\r\nimport { ArrowRight } from '@element-plus/icons-vue'\r\nimport defaultUrl from '@/assets/avatar.gif'\r\nconst appStore =  useAppStore()\r\nconst userStore = useUserStore()\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst avatarUrl = computed(() => {\r\n  return userStore.avatar || defaultUrl\r\n})\r\nconst collapse = computed(() => {\r\n  return appStore.sidebar.collapse\r\n})\r\nconst breadcrumb = computed(() => {\r\n  return route.path!=='/home' ? route.matched : []\r\n})\r\n\r\nconst toggleSideBar = (collapse:boolean) => {\r\n  appStore.toggleSideBar(collapse)\r\n}\r\nconst handleCommand = (command:string) => {\r\n  if (command === 'logout') {\r\n    userStore.logout().then(() => {\r\n      router.push({path: '/login'})\r\n    })\r\n  }\r\n} \r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.navbar {\r\n  display: flex;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  overflow: hidden;\r\n  position: relative;\r\n  background: #fff;\r\n  box-shadow: 0 1px 4px rgba(0,21,41,.08);\r\n  .collapse {\r\n    cursor: pointer;\r\n    font-size: 24px;\r\n  }\r\n  .left,\r\n  .right {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .avatar-container {\r\n    .el-avatar {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  .el-breadcrumb {\r\n    margin-left: 8px;\r\n  }\r\n}\r\n</style>","import { defineStore } from 'pinia'\r\nimport type { RouteRecordRaw, _RouteRecordBase } from 'vue-router'\r\nimport { asyncRoutes, constantRoutes } from '@/router'\r\n\r\n/**\r\n * 判断当前用户是否具有权限\r\n * @param roles\r\n * @param route\r\n */\r\n function hasPermission(roles:string[], route:RouteRecordRaw) {\r\n  if (route.meta?.roles) {\r\n    const _roles = (route.meta.roles || []) as string[]\r\n    return roles.some(role => _roles.includes(role))\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\n/**\r\n * Filter asynchronous routing tables by recursion\r\n * @param routes asyncRoutes\r\n * @param roles\r\n */\r\n export function filterAsyncRoutes(routes:RouteRecordRaw[], roles:string[]):RouteRecordRaw[] {\r\n  const res:RouteRecordRaw[] = []\r\n\r\n  routes.forEach(route => {\r\n    const tmp = { ...route }\r\n    if (hasPermission(roles, tmp)) {\r\n      if (tmp.children) {\r\n        tmp.children = filterAsyncRoutes(tmp.children, roles)\r\n      }\r\n      res.push(tmp)\r\n    }\r\n  })\r\n\r\n  return res\r\n}\r\nexport const useRouteStore = defineStore({\r\n  id: 'routes',\r\n  state: () => ({\r\n    routes: <RouteRecordRaw[]>[],\r\n    dynamicRoutes: <RouteRecordRaw[]>[]\r\n  }),\r\n  getters: {\r\n  },\r\n  actions: {\r\n    generateRoutes(roles:string[]) {\r\n      return new Promise(resolve => {\r\n        let accessedRoutes = []\r\n        if (roles.includes('admin')) {\r\n          accessedRoutes = asyncRoutes || []\r\n        } else {\r\n          accessedRoutes = filterAsyncRoutes(asyncRoutes, roles)\r\n        }\r\n        this.routes = constantRoutes.concat(accessedRoutes)\r\n        this.dynamicRoutes = accessedRoutes;\r\n        resolve(accessedRoutes)\r\n      })\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <div class=\"sidebar-logo-container\" :class=\"{'collapse':collapse}\">\r\n    <transition name=\"sidebarLogoFade\">\r\n      <router-link v-if=\"collapse\" key=\"collapse\" class=\"sidebar-logo-link\" to=\"/\">\r\n        <img v-if=\"logo\" :src=\"logo\" class=\"sidebar-logo\">\r\n        <h1 v-else class=\"sidebar-title\">{{ title }} </h1>\r\n      </router-link>\r\n      <router-link v-else key=\"expand\" class=\"sidebar-logo-link\" to=\"/\">\r\n        <img v-if=\"logo\" :src=\"logo\" class=\"sidebar-logo\">\r\n        <h1 class=\"sidebar-title\">{{ title }} </h1>\r\n      </router-link>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\" name=\"SidebarLogo\">\r\n  defineProps<{\r\n    collapse:boolean\r\n  }>()\r\n  const title = '弄个锤子'\r\n  const logo = 'https://foruda.gitee.com/avatar/1661823005869359265/5305302_sangtian152_1661823005.png!avatar100'\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sidebarLogoFade-enter-active {\r\n  transition: opacity 1.5s;\r\n}\r\n\r\n.sidebarLogoFade-enter,\r\n.sidebarLogoFade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.sidebar-logo-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  background: #2b2f3a;\r\n  text-align: center;\r\n  overflow: hidden;\r\n\r\n  & .sidebar-logo-link {\r\n    height: 100%;\r\n    width: 100%;\r\n\r\n    & .sidebar-logo {\r\n      width: 32px;\r\n      height: 32px;\r\n      vertical-align: middle;\r\n      margin-right: 12px;\r\n    }\r\n\r\n    & .sidebar-title {\r\n      display: inline-block;\r\n      margin: 0;\r\n      color: #fff;\r\n      font-weight: 600;\r\n      line-height: 50px;\r\n      font-size: 14px;\r\n      font-family: Avenir, Helvetica Neue, Arial, Helvetica, sans-serif;\r\n      vertical-align: middle;\r\n    }\r\n  }\r\n\r\n  &.collapse {\r\n    .sidebar-logo {\r\n      margin-right: 0px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","/**\r\n * Created by sangtian152 on 2022/09/02.\r\n */\r\n\r\n/**\r\n * @param {string} path\r\n * @returns {Boolean}\r\n */\r\n export function isExternal(path:string):boolean {\r\n  return /^(https?:|mailto:|tel:)/.test(path)\r\n}\r\n\r\n/**\r\n * @param {string} str\r\n * @returns {Boolean}\r\n */\r\nexport function validUsername(str:string):boolean {\r\n  const valid_map = ['admin', 'editor']\r\n  return valid_map.indexOf(str.trim()) >= 0\r\n}\r\n\r\n/**\r\n * @param {string} url\r\n * @returns {Boolean}\r\n */\r\nexport function validURL(url:string):boolean {\r\n  const reg = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\r\n  return reg.test(url)\r\n}\r\n\r\n/**\r\n * @param {string} str\r\n * @returns {Boolean}\r\n */\r\nexport function validLowerCase(str:string):boolean {\r\n  const reg = /^[a-z]+$/\r\n  return reg.test(str)\r\n}\r\n\r\n/**\r\n * @param {string} str\r\n * @returns {Boolean}\r\n */\r\nexport function validUpperCase(str:string):boolean {\r\n  const reg = /^[A-Z]+$/\r\n  return reg.test(str)\r\n}\r\n\r\n/**\r\n * @param {string} str\r\n * @returns {Boolean}\r\n */\r\nexport function validAlphabets(str:string) {\r\n  const reg = /^[A-Za-z]+$/\r\n  return reg.test(str)\r\n}\r\n\r\n/**\r\n * @param {string} email\r\n * @returns {Boolean}\r\n */\r\nexport function validEmail(email:string):boolean {\r\n  const reg = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n  return reg.test(email)\r\n}\r\n\r\n/**\r\n * @param {string} str\r\n * @returns {Boolean}\r\n */\r\nexport function isString(str:unknown):boolean {\r\n  if (typeof str === 'string' || str instanceof String) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\n/**\r\n * @param {Array} arg\r\n * @returns {Boolean}\r\n */\r\nexport function isArray(arg:unknown):boolean {\r\n  if (typeof Array.isArray === 'undefined') {\r\n    return Object.prototype.toString.call(arg) === '[object Array]'\r\n  }\r\n  return Array.isArray(arg)\r\n}\r\n","<template>\r\n  <component :is=\"component\" v-bind=\"menuProps\">\r\n    <el-icon v-if=\"icon\">\r\n      <component :is=\"icon\" />\r\n    </el-icon>\r\n    <span v-if=\"subMenu\">{{title}}</span>\r\n    <template v-if=\"!subMenu && title\" #title>{{title}}</template>\r\n  </component>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n  import { computed } from 'vue'\r\n  const { icon = '', title = '', index, isNest } = defineProps({\r\n    icon: String,\r\n    title: String,\r\n    index: String,\r\n    isNest: Boolean\r\n  })\r\n  const subMenu = computed(() => {\r\n    return !index\r\n  })\r\n  // index 有值说明是 el-menu-item\r\n  const component = computed(() => {\r\n    return index ? 'el-menu-item' : 'div'\r\n  })\r\n\r\n  const menuProps = computed(() => {\r\n    if (index) {\r\n        return {\r\n          index,\r\n          class: !isNest ? 'submenu-title-noDropdown' : '',\r\n        }\r\n      }\r\n  })\r\n</script>\r\n","<template>\r\n  <component :is=\"component\" v-bind=\"linkProps\">\r\n    <slot />\r\n  </component>\r\n</template>\r\n<script setup lang=\"ts\">\r\n  import { computed } from 'vue';\r\n  import { isExternal } from \"@/utils/validate\";\r\n\r\n  const { to = '' } = defineProps({\r\n    to: String\r\n  })\r\n  const linkProps = computed(() => {\r\n    if (isExternal(to)) {\r\n        return {\r\n          href: to,\r\n          target: '_blank',\r\n          rel: 'noopener'\r\n        }\r\n      }\r\n      return {\r\n        to: to\r\n      }\r\n  })\r\n  const component = computed(() => {\r\n    if (isExternal(to)) {\r\n      return 'a'\r\n    }\r\n    return 'router-link'\r\n  })\r\n</script>","<template>\r\n  <div v-if=\"!item.hidden && !item.meta?.hidden\">\r\n    <template v-if=\"hasOneShowingChild(item.children, item) && (!onlyOneChild?.children || onlyOneChild.noShowingChildren) &&!item.meta?.alwaysShow\">\r\n      <app-link v-if=\"onlyOneChild?.meta\" :to=\"resolvePath(onlyOneChild.path)\">\r\n        <item :index=\"resolvePath(onlyOneChild.path)\" :icon=\"onlyOneChild.meta.icon || item.meta?.icon\" :title=\"routeTitle\" :isNest=\"isNest\" />\r\n      </app-link>\r\n    </template>\r\n\r\n    <el-sub-menu v-else ref=\"subMenu\" :index=\"resolvePath(item.path)\" popper-append-to-body>\r\n      <template #title>\r\n        <item v-if=\"item.meta\" :icon=\"item.meta.icon\" :title=\"item.meta.title\" />\r\n      </template>\r\n      <MenuItem\r\n        v-for=\"child in item.children\"\r\n        :key=\"child.path\"\r\n        :is-nest=\"true\"\r\n        :item=\"child\"\r\n        :base-path=\"resolvePath(child.path)\"\r\n        class=\"nest-menu\"\r\n      />\r\n    </el-sub-menu>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\" name=\"MenuItem\">\r\nimport { ref, computed, } from 'vue'\r\nimport path from 'path-browserify'\r\nimport { isExternal } from '@/utils/validate'\r\nimport Item from './Item.vue'\r\nimport AppLink from './Link.vue'\r\nimport type { _RouteRecordBase, _RouteRecordPartial } from 'vue-router'\r\nconst { item, isNest = false, basePath = '' } = defineProps({\r\n  // 路由对象\r\n  item: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  isNest: Boolean,\r\n  basePath: String\r\n})\r\nconst onlyOneChild = ref<_RouteRecordBase>()\r\nconst routeTitle = computed(() => {\r\n  return onlyOneChild.value?.meta?.title as string\r\n})\r\n\r\nconst hasOneShowingChild = (children: _RouteRecordBase[] = [], parent: _RouteRecordPartial) => {\r\n  const showingChildren = children.filter(item => {\r\n    if (item.meta?.hidden) {\r\n      return false\r\n    } else {\r\n      // 临时保存当前路由，只有一个显示子项时将使用\r\n      onlyOneChild.value = item\r\n      return true\r\n    }\r\n  })\r\n\r\n  // 如果只有一个子路由\r\n  if (showingChildren.length === 1) {\r\n    return true\r\n  }\r\n  // 如果只有一个字路由，展示父级\r\n  if (showingChildren.length === 0) {\r\n    onlyOneChild.value = { ... parent, path: '', noShowingChildren: true }\r\n    return true\r\n  }\r\n  \r\n  return false\r\n}\r\nconst resolvePath = (routePath='') => {\r\n  if (isExternal(routePath)) {\r\n    return routePath\r\n  }\r\n  if (isExternal(basePath)) {\r\n    return basePath\r\n  }\r\n  return path.resolve(basePath, routePath)\r\n}\r\n</script>\r\n","<template>\r\n  <el-aside class=\"sidebar-container\" width=\"\">\r\n    <Logo v-if=\"sidebarLogo\" :collapse=\"collapse\" />\r\n    <el-menu\r\n      unique-opened\r\n      text-color=\"#fff\"\r\n      active-text-color=\"#ffd04b\"\r\n      background-color=\"#545c64\"\r\n      :collapse=\"collapse\"\r\n      :default-active=\"activeMenu\"\r\n    >\r\n      <template v-for=\"route in routes\" :key=\"route.path\">\r\n        <Menu :item=\"route\" :base-path=\"route.path\" />\r\n      </template>\r\n    </el-menu>\r\n  </el-aside>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { useRouteStore } from '@/stores/routes';\r\nimport { useAppStore } from '@/stores/app';\r\nimport { useSettingsStore } from '@/stores/settings'\r\nimport Logo from \"./Logo.vue\"\r\nimport Menu from \"./MenuItem.vue\"\r\n\r\nconst appStore =  useAppStore()\r\nconst routeStore = useRouteStore()\r\nconst settingsStore = useSettingsStore()\r\n\r\nconst routes = computed(() => {\r\n  return routeStore.routes\r\n})\r\n\r\nconst activeMenu = computed(() => {\r\n  const { meta, path } = useRoute()\r\n  // 侧边栏菜单高亮\r\n  if (meta.activeMenu) {\r\n    return meta.activeMenu\r\n  }\r\n  return path\r\n})\r\n\r\nconst sidebarLogo = computed(() => {\r\n  return settingsStore.settings.sidebarLogo\r\n})\r\nconst collapse = computed(() => {\r\n  return appStore.sidebar.collapse\r\n})\r\n\r\nonMounted(() => {\r\n  routeStore.generateRoutes(['admin'])\r\n})\r\n</script>","import { defineStore } from 'pinia'\r\nimport type { RouteLocationNormalized, _RouteTagsView, RouteRecordName } from 'vue-router'\r\nexport const useTagsStore = defineStore({\r\n  id: 'tagsView',\r\n  state: () => ({\r\n    visitedViews: <_RouteTagsView[]>[],\r\n    cachedViews: <RouteRecordName[]>[]\r\n  }),\r\n  actions: {\r\n    addView(view:_RouteTagsView) {\r\n      this.addVisitedView(view)\r\n      this.addCachedView(view)\r\n    },\r\n    addVisitedView(view:_RouteTagsView) {\r\n      if (this.visitedViews.some(v => v.path === view.path)) return\r\n      this.visitedViews.push(\r\n        Object.assign({}, view, {\r\n          title: view.meta?.title || 'no-name'\r\n        })\r\n      )\r\n    },\r\n    addCachedView(view:_RouteTagsView) {\r\n      if (!view.name || this.cachedViews.includes(view.name)) return\r\n      if (!view.meta?.noCache) {\r\n        this.cachedViews.push(view.name)\r\n      }\r\n    },\r\n    delView(view:_RouteTagsView) {\r\n      return new Promise(resolve => {\r\n        this.delVisitedView(view)\r\n        this.delCachedView(view)\r\n        resolve([...this.visitedViews])\r\n      })\r\n    },\r\n    delVisitedView(view:_RouteTagsView) {\r\n      return new Promise(resolve => {\r\n        for (const [i, v] of this.visitedViews.entries()) {\r\n          if (v.path === view.path) {\r\n            this.visitedViews.splice(i, 1)\r\n            break\r\n          }\r\n        }\r\n        resolve([...this.visitedViews])\r\n      })\r\n    },\r\n    delCachedView(view:_RouteTagsView) {\r\n      return new Promise(resolve => {\r\n        const index = view.name ? this.cachedViews.indexOf(view.name) : -1\r\n        index > -1 && this.cachedViews.splice(index, 1)\r\n        resolve([...this.cachedViews])\r\n      })\r\n    },\r\n  \r\n    delOthersViews(view:_RouteTagsView) {\r\n      return new Promise(resolve => {\r\n        this.delOthersVisitedViews(view)\r\n        this.delOthersVisitedViews(view)\r\n        resolve({\r\n          visitedViews: [...this.visitedViews],\r\n          cachedViews: [...this.cachedViews]\r\n        })\r\n      })\r\n    },\r\n    delOthersVisitedViews(view:_RouteTagsView) {\r\n      return new Promise(resolve => {\r\n        this.visitedViews = this.visitedViews.filter(v => {\r\n          return v.meta?.affix || v.path === view.path\r\n        })\r\n        resolve([...this.visitedViews])\r\n      })\r\n    },\r\n    delOthersCachedViews(view:_RouteTagsView) {\r\n      return new Promise(resolve => {\r\n        const index = view.name ? this.cachedViews.indexOf(view.name) : -1\r\n        if (index > -1) {\r\n          this.cachedViews = this.cachedViews.slice(index, index + 1)\r\n        } else {\r\n          // if index = -1, there is no cached tags\r\n          this.cachedViews = []\r\n        }\r\n        resolve([...this.cachedViews])\r\n      })\r\n    },\r\n  \r\n    delAllViews() {\r\n      return new Promise(resolve => {\r\n        this.delAllVisitedViews()\r\n        this.delAllCachedViews()\r\n        resolve({\r\n          visitedViews: [...this.visitedViews],\r\n          cachedViews: [...this.cachedViews]\r\n        })\r\n      })\r\n    },\r\n    delAllVisitedViews() {\r\n      return new Promise(resolve => {\r\n        // keep affix tags\r\n        const affixTags = this.visitedViews.filter(tag => tag.meta?.affix)\r\n        this.visitedViews = affixTags\r\n        resolve([...this.visitedViews])\r\n      })\r\n    },\r\n    delAllCachedViews() {\r\n      return new Promise(resolve => {\r\n        this.cachedViews = []\r\n        resolve([...this.cachedViews])\r\n      })\r\n    },\r\n  \r\n    updateVisitedView(view:_RouteTagsView) {\r\n      for (let v of this.visitedViews) {\r\n        if (v.path === view.path) {\r\n          v = Object.assign(v, view)\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <div class=\"tags-view\">\r\n    <div class=\"tags-view-scroll\">\r\n      <el-tabs\r\n        v-model=\"tagsValue\"\r\n        type=\"card\"\r\n        @tab-click=\"handleClick\"\r\n        @tab-remove=\"handleClose\"\r\n      >\r\n        <el-tab-pane\r\n          v-for=\"item in dynamicTags\"\r\n          :key=\"item.name\"\r\n          :label=\"item.meta?.title\"\r\n          :name=\"item.name\"\r\n          :closable=\"!item.meta?.affix\"\r\n        >\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </div>\r\n    <el-dropdown trigger=\"click\" @command=\"handleCommand\">\r\n      <span class=\"el-dropdown-link\">\r\n        更多操作<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n      </span>\r\n      <template #dropdown>\r\n        <el-dropdown-menu>\r\n          <el-dropdown-item command=\"refresh\">刷新页签</el-dropdown-item>\r\n          <el-dropdown-item command=\"closeLeft\">关闭左侧</el-dropdown-item>\r\n          <el-dropdown-item command=\"closeRight\">关闭右侧</el-dropdown-item>\r\n          <el-dropdown-item command=\"closeOther\">关闭其他</el-dropdown-item>\r\n          <el-dropdown-item command=\"closeAll\">关闭全部</el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </template>\r\n    </el-dropdown>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport path from 'path-browserify'\r\nimport { ref, computed, watch, onMounted, nextTick } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useTagsStore } from '@/stores/tagsView'\r\nimport { useRouteStore } from '@/stores/routes'\r\nimport type { _RouteRecordBase, RouteRecordRaw, _RouteTagsView } from 'vue-router'\r\nimport type { TabsPaneContext, TabPanelName } from 'element-plus'\r\nconst tagsStore = useTagsStore()\r\nconst routeStore = useRouteStore()\r\nconst dynamicTags = computed(() => {\r\n  return tagsStore.visitedViews || []\r\n})\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst tagsValue = ref(route.name)\r\nonMounted(() => {\r\n  initTags();\r\n  addTags(route);\r\n})\r\nwatch(route, () => {\r\n  addTags(route)\r\n})\r\n\r\nlet affixTags:_RouteTagsView[] = []\r\nconst initTags = () => {\r\n  affixTags = filterAffixTags(routeStore.routes);\r\n  for (const tag of affixTags) {\r\n    if (tag.name) {\r\n      tagsStore.addVisitedView(tag)\r\n    }\r\n  }\r\n}\r\nconst filterAffixTags = (routes: RouteRecordRaw[], basePath = \"/\") => {\r\n  let tags: _RouteTagsView[] = [];\r\n  routes.forEach((route) => {\r\n    if (route.meta && route.meta.affix) {\r\n      const tagPath = path.resolve(basePath, route.path);\r\n      tags.push({...route, path: tagPath, fullPath: tagPath});\r\n    }\r\n    if (route.children) {\r\n      const tempTags = filterAffixTags(route.children, route.path);\r\n      if (tempTags.length >= 1) {\r\n        tags = [...tags, ...tempTags];\r\n      }\r\n    }\r\n  });\r\n  return tags;\r\n}\r\n\r\nconst isActive = (tag:_RouteTagsView) => {\r\n  return route.path === tag.path\r\n}\r\n\r\nconst toLastView = (visitedViews:_RouteTagsView[]) => {\r\n  const latestView = visitedViews.slice(-1)[0]\r\n  if (latestView) {\r\n    router.push(latestView.fullPath)\r\n  } else {\r\n    router.push('/')\r\n  }\r\n}\r\n\r\nconst addTags = (route:_RouteTagsView) => {\r\n  if (route.name) {\r\n    tagsValue.value = route.name\r\n    tagsStore.addView(route)\r\n  }\r\n  return false\r\n}\r\nconst refreshRoute = () => {\r\n  tagsStore.delCachedView(route);\r\n  const { fullPath } = route\r\n  nextTick(() => {\r\n    router.replace({\r\n      path: '/redirect/' + encodeURIComponent(fullPath)\r\n    })\r\n  })\r\n}\r\nconst closeOtherRoutes = () => {\r\n  tagsStore.delOthersViews(route);\r\n}\r\n\r\nconst closeAllRoutes = () => {\r\n  tagsStore.delAllViews();\r\n  if (affixTags.some(tag => tag.path === route.path)) {\r\n    return\r\n  }\r\n  router.push(\"/\")\r\n}\r\n\r\nconst handleClick = (panel:TabsPaneContext) => {\r\n  const tag = tagsStore.visitedViews.find(item => item.name === panel.paneName)\r\n  if (tag) {\r\n    router.push(tag.fullPath)\r\n  }\r\n}\r\nconst handleClose = (name: TabPanelName) => {\r\n  const tag = tagsStore.visitedViews.find(item => item.name === name)\r\n  if (tag) {\r\n    tagsStore.delView(tag).then(visitedViews => {\r\n      if (isActive(tag)) {\r\n        toLastView(visitedViews as _RouteTagsView[])\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nconst handleCommand = (command:string) => {\r\n  if( command=== 'refresh') {\r\n    refreshRoute()\r\n  } else if (command === 'closeOther') {\r\n    closeOtherRoutes()\r\n  } else if(command === 'closeLeft'){\r\n    // this.closeLeftRoutes()\r\n  } else if (command === 'closeRight') {\r\n    // this.closeRightRoutes()\r\n  } else if (command === 'closeAll') {\r\n    closeAllRoutes()\r\n  }\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.tags-view {\r\n  width: 100%;\r\n  height: 34px;\r\n  display: flex;\r\n  align-items: center;\r\n  background: #fff;\r\n  padding: 0 10px;\r\n  border-bottom: 1px solid #d8dce5;\r\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .12), 0 0 3px 0 rgba(0, 0, 0, .04);\r\n  .el-scrollbar {\r\n    flex: 1;\r\n  }\r\n  .scrollbar-flex-content {\r\n    display: flex;\r\n    height: 33px;\r\n    align-items: center;\r\n  }\r\n  .el-tag {\r\n    & + .el-tag {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n  .el-dropdown-link {\r\n    cursor: pointer;\r\n    font-size: 12px;\r\n  }\r\n}\r\n\r\n</style>","<template>\r\n  <div class=\"layout-setings\">\r\n    <el-button class=\"theme-button\" type=\"primary\" icon=\"Setting\" @click=\"drawer = true\"></el-button>\r\n    <el-drawer v-model=\"drawer\" :size=\"260\" title=\"系统布局设置\">\r\n      <div class=\"theme-drawer\">\r\n        <div class=\"theme-drawer-body\">\r\n          <div class=\"theme-item\">\r\n            <span class=\"label\">固定Header</span>\r\n            <el-switch\r\n              size=\"default\"\r\n              v-model=\"settings.fixedHeader\">\r\n            </el-switch>\r\n          </div>\r\n          <div class=\"theme-item\">\r\n            <span class=\"label\">开启Tagsbar</span>\r\n            <el-switch\r\n              size=\"default\"\r\n              v-model=\"settings.tagsView\">\r\n            </el-switch>\r\n          </div>\r\n          <div class=\"theme-item\">\r\n            <span class=\"label\">显示Logo</span>\r\n            <el-switch\r\n              size=\"default\"\r\n              v-model=\"settings.sidebarLogo\">\r\n            </el-switch>\r\n          </div>\r\n        </div>\r\n        <div class=\"footer\">\r\n          <el-button type=\"primary\" size=\"default\" @click=\"handleSubmit\">保存</el-button>\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive } from 'vue'\r\nimport { useSettingsStore } from '@/stores/settings'\r\nimport defaultSettings from '@/config/settings'\r\nconst { showSettings, tagsView, fixedHeader, sidebarLogo } = defaultSettings\r\nconst drawer = ref(false)\r\nconst settings = reactive({\r\n  showSettings,\r\n  tagsView,\r\n  fixedHeader,\r\n  sidebarLogo\r\n})\r\nconst settingsStore = useSettingsStore()\r\nconst themeChange = () => {}\r\nconst handleSubmit = () => {\r\n  settingsStore.changeSetting(settings)\r\n  drawer.value = false\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .theme-button {\r\n    height: auto;\r\n    font-size: 20px;\r\n    padding: 10px;\r\n    position: fixed;\r\n    top: 50%;\r\n    right:0;\r\n    z-index: 100;\r\n    transition: right 0.3s;\r\n    border-bottom-right-radius: 0;\r\n    border-top-right-radius: 0;\r\n  }\r\n  .theme-drawer {\r\n    .footer {\r\n      padding:10px;\r\n      text-align: right;\r\n      .el-button {\r\n        width: 100%;\r\n      }\r\n    }\r\n    .theme-drawer-body {\r\n      padding: 0 10px;\r\n      .theme-item {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        padding: 8px 0;\r\n      }\r\n    }\r\n  }\r\n</style>","<template>\r\n  <el-config-provider :size=\"'small'\">\r\n    <el-container class=\"app-container\" :class=\"classObj\">\r\n      <Sidebar />\r\n      <el-container class=\"main-container\" :class=\"{'has-tags-view':showTagsView}\" direction=\"vertical\">\r\n        <div :class=\"{'fixed-header':fixedHeader}\">\r\n          <Navbar />\r\n          <TagsView v-if=\"showTagsView\" />\r\n        </div>\r\n        <AppMain />\r\n      </el-container>\r\n      <Settings />\r\n    </el-container>\r\n  </el-config-provider>\r\n</template>\r\n<script setup lang=\"ts\">\r\n  import { computed } from 'vue'\r\n  import { useAppStore } from '@/stores/app';\r\n  import { useSettingsStore } from '@/stores/settings'\r\n  import { AppMain, Navbar, Sidebar, TagsView, Settings } from './components'\r\n\r\n  const appStore =  useAppStore()\r\n  const settingsStore = useSettingsStore()\r\n  const showTagsView = computed(() => {\r\n    return settingsStore.settings.tagsView\r\n  })\r\n  const fixedHeader = computed(() => {\r\n    return settingsStore.settings.fixedHeader\r\n  })\r\n  const classObj = computed(() => {\r\n    return {\r\n        hideSidebar: appStore.sidebar.collapse,\r\n        openSidebar: !appStore.sidebar.collapse,\r\n      }\r\n  })\r\n</script>","import { createRouter, createWebHistory, createWebHashHistory } from 'vue-router'\nimport type { RouteRecordRaw,_RouteRecordBase } from 'vue-router'\nimport Layout from '@/layout/index.vue'\n\n/**\n * constantRoutes\n * a base page that does not have permission requirements\n * all roles can be accessed\n */\n export const constantRoutes:RouteRecordRaw[] = [\n  {\n    path: '/login',\n    component: () => import('@/views/login/index.vue'),\n    meta: {title: '用户登录', hidden: true},\n  },\n  {\n    path: '/404',\n    component: () => import('@/views/error-page/404.vue'),\n    hidden: true\n  },\n  {\n    path: '/401',\n    component: () => import('@/views/error-page/401.vue'),\n    hidden: true\n  },\n  {\n    path: '/redirect',\n    component: Layout,\n    meta: { hidden: true },\n    children: [\n      {\n        path: '/redirect/:path(.*)',\n        component: () => import('@/views/redirect/index.vue')\n      }\n    ]\n  },\n  {\n    path: '/',\n    component: Layout,\n    redirect: '/home',\n    children: [\n      {\n        path: 'home',\n        component: () => import (\"@/views/home/index.vue\"),\n        name: 'Home',\n        meta: { title: 'Dashboard', icon: 'HomeFilled', affix: true }\n      }\n    ]\n  },\n  {\n    path: '/image',\n    component: Layout,\n    redirect: '/image/watermark',\n    name: 'Image',\n    meta: {title: '图片', icon: 'Picture'},\n    children: [\n      {\n        path: 'watermark',\n        component: () => import('@/views/image/index.vue'),\n        name: 'Watermark',\n        meta: { title: '图片加水印' }\n      },\n    ]\n  },\n  {\n    path: '/tree',\n    component: Layout,\n    redirect: '/tree/base',\n    name: 'Tree',\n    meta: {title: '组织树', icon: 'Picture', alwaysShow: true },\n    children: [\n      {\n        path: 'base',\n        component: () => import('@/views/tree/baseTree.vue'),\n        name: 'TreeBase',\n        meta: { title: '组织树'}\n      },\n    ]\n  },\n  {\n    path: '/table',\n    component: Layout,\n    redirect: '/table/complex-table',\n    name: 'Table',\n    meta: {title: 'Table', icon: 'Grid'},\n    children: [\n      {\n        path: 'dynamic-table',\n        component: () => import('@/views/table/dynamic.vue'),\n        name: 'DynamicTable',\n        meta: { title: 'Dynamic Table' }\n      },\n      {\n        path: 'drag-table',\n        component: () => import('@/views/home/index.vue'),\n        name: 'DragTable',\n        meta: { title: 'Drag Table' }\n      },\n      {\n        path: 'inline-edit-table',\n        component: () => import('@/views/home/index.vue'),\n        name: 'InlineEditTable',\n        meta: { title: 'Inline Edit' }\n      },\n      {\n        path: 'complex-table',\n        component: () => import('@/views/home/index.vue'),\n        name: 'ComplexTable',\n        meta: { title: 'Complex Table' }\n      }\n    ]\n  }\n]\n\n/**\n * asyncRoutes\n * the routes that need to be dynamically loaded based on user roles\n */\nexport const asyncRoutes:RouteRecordRaw[] = [\n\n  // 404 page must be placed at the end !!!\n  { path: '/:pathMatch(.*)', redirect: '/404', hidden: true }\n]\n\nconst router = createRouter({\n  history: createWebHashHistory(import.meta.env.BASE_URL),\n  routes: [\n    ...constantRoutes,\n    ...asyncRoutes\n  ]\n})\n\nexport const addRoutes = (routes:RouteRecordRaw[]) => {\n  for(let i = 0; i < routes.length; i++) {\n    router.addRoute(routes[i])\n  }\n}\n\nexport default router\n","import router, { addRoutes } from '@/router'\r\nimport NProgress from 'nprogress'\r\nimport 'nprogress/nprogress.css'\r\nimport { ElMessage } from 'element-plus'\r\nimport type { MessageParamsWithType } from 'element-plus'\r\nimport type { RouteLocationNormalized } from 'vue-router'\r\nimport setting from './settings'\r\nimport { useRouteStore } from '@/stores/routes'\r\nimport { useUserStore } from '@/stores/user'\r\nNProgress.configure({ showSpinner: false });\r\n\r\nconst whiteList = ['/login'];\r\n\r\nrouter.beforeEach(async (to: RouteLocationNormalized, _from: RouteLocationNormalized, next:Function)=>{\r\n  const userStore = useUserStore()\r\n  const routeStore = useRouteStore()\r\n  NProgress.start();\r\n  if (userStore.token) {\r\n    if (to.path === '/login') {\r\n      // If is login, redirect to the home page\r\n      next({ path: '/' })\r\n      NProgress.done()\r\n    } else {\r\n      if (userStore.roles.length === 0) {\r\n        try {\r\n          await userStore.getUserInfo()\r\n          const roles = userStore.roles\r\n          // Generate accessible routes map based on role\r\n          routeStore.generateRoutes(roles);\r\n          // Dynamically add accessible routes\r\n          addRoutes(routeStore.dynamicRoutes);\r\n\r\n          next()\r\n        } catch(err) {\r\n          userStore.resetToken();\r\n          ElMessage.error((err || \"error\") as MessageParamsWithType)\r\n          next(`/login?redirect=${to.path}`);\r\n          NProgress.done()\r\n        }\r\n      } else {\r\n        next()\r\n      }\r\n    }\r\n  } else {\r\n    // Has no token\r\n    if (whiteList.indexOf(to.path) !== -1) {\r\n      // In the free login whitelist, go directly\r\n      next()\r\n    } else {\r\n      // Other pages that do not have permission to access are redirected to the login page.\r\n      next(`/login?redirect=${to.path}`)\r\n      NProgress.done()\r\n    }\r\n  }\r\n})\r\nrouter.afterEach((to: RouteLocationNormalized) => {\r\n\tNProgress.done();\r\n\tdocument.title = to.meta?.title as string || '';\r\n})","import { createApp } from 'vue'\nimport { createPinia } from 'pinia'\nimport ElementPlus from 'element-plus'\n// 注册Element图标\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue'\nimport App from './App.vue'\nimport router from './router'\n\nimport 'element-plus/dist/index.css'\nimport '@/styles/index.scss'\nimport './assets/main.css'\n\nimport '@/config/permission' // 权限控制\n\nconst app = createApp(App)\n\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n  app.component(key, component)\n}\n\napp.use(createPinia())\napp.use(router)\napp.use(ElementPlus, {\n  size: 'mini'\n})\napp.mount('#app')\n"],"file":"static/js2/index-ac08aa59.js"}